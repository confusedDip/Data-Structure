#include <stdio.h>
#include <stdlib.h>
#include<string.h>

struct node
{
    int data;
    struct node* next;
};
struct node* head=NULL;

void append(int data)
{
    struct node* temp=(struct node*) malloc(sizeof(struct node));
    temp->data=data;
    temp->next=NULL;
    if(head==NULL)
        head=temp;
    else
    {
        struct node* current=head;
        while(current->next !=NULL)
            current=current->next;
        current->next=temp;
    }
}
void INSBEF(int data, int target)
{
    struct node *prev, *current;
    current=head;
    while(current!=NULL)
    {
        if(current->data==target)
        {
            if(current!=head)
            {
            struct node* temp=(struct node*) malloc(sizeof(struct node));
            temp->data=data;
            temp->next=current;
            prev->next=temp;
            }
            else
            {
                struct node* temp=(struct node*) malloc(sizeof(struct node));
                temp->data=data;
                temp->next=current;
                head=temp;
            }
            break;
        }

        else
        {
            prev=current;
            current=current->next;
        }
    }

}

void display()
{
    struct node* current= head;
    printf("Head[%p]-->",head);
    while(current!=NULL)
    {
        printf("[%d|%p]-->",current->data,current->next);
        current=current->next;
    }
    printf("NULL\n");
}
int main(int argc , char *argv[])
{
    int i=0,num=0;
    char s[100];
    printf("Enter your numbers:\n");
    gets(s);
    printf("The numbers before sorting: \n");
    puts(s);
    while(i<strlen(s))
    {
        if(s[i]>='0' && s[i]<='9')
            {
                num=0;
                while(s[i]!=' ' && i<strlen(s))
                {
                    num=num*10+(s[i]-'0');
                    i++;
                }
                if(head==NULL)
                {
                    append(num);
                }
                else
                {
                    struct node* current=head;
                    while(current!=NULL)
                    {
                        if(current->data > num)
                        {
                            INSBEF(num,current->data);
                            break;
                        }
                        else
                            current=current->next;
                    }
                    if(current==NULL)
                    {
                        append(num);
                    }

                }
            }
            else if(s[i]== ' ')
                i++;
    }
    printf("The List after sorting:\n");
    display();
}
